<!--
    This file is part of MyDMAM.

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 3 of the License, or
    any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    Copyright (C) Media ex Machina 2025

-->
<div>

<div>
    <input
        #topsearchinput
        type="text"
        placeholder="Search..."
        (keyup.enter)="onSearchSubmit($event)"
        (input)="suggestion()"
        [value]="q()" />
</div>

@if (suggestionMenuOpened()) {
    @let searchResult = searchResponse();
    @let selectedItemHashPath = selectedSuggestionMenuItemHashPath();
    <ul>
        @for (item of searchResult?.result?.foundedFiles; track item.hashPath) {
            <li [class.selected]="selectedItemHashPath == item.hashPath">
                <a class="searchSuggestionItem"
                    [routerLink]="['/navigator', item.storage, item.hashPath]"
                    [queryParams]="{ q: q() }">
                    {{ item.name }}
                </a>
            </li>
        }
    </ul>
}
</div>
